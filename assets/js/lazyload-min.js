!function(){function n(t){var e=o[t];return"object"==typeof e?e:(e.exports||(e.exports={},e.exports=e.call(e.exports,n,e.exports,e)||e.exports),e.exports)}function t(t,e){o[t]=e}var o={};t("./defaults.js",function(t,e,n){n.exports={root:document,container:!1,elements:".hqy-lazy",success:!1,error:!1,offset:2,separator:",",loadingClass:"hqy-loading",successClass:"hqy-loaded",errorClass:"hqy-error",breakpoints:!1,loadInvisible:!1,validateDelay:25,saveViewportOffsetDelay:50,srcset:"data-srcset",src:"data-src"}}),t("./dom.js",function(t,o,e){var i=t("./utils.js"),s=o.setAttr=function(t,e,n){t.setAttribute(e,n)},r=o.getAttr=function(t,e){return t.getAttribute(e)},n=(o.removeAttr=function(t,e){t.removeAttribute(e)},{}),a=o.hasClass=function(t,e){return n[e]||(n[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),n[e].test(r(t,"class")||"")&&n[e]};o.addClass=function(t,e){a(t,e)||s(t,"class",i.trim(r(t,"class")||"")+" "+e)},o.removeClass=function(t,e){var n;(n=a(t,e))&&s(t,"class",(r(t,"class")||"").replace(n," "))},o.toElements=function(t){if(i.isString(t))return o.querySelectorAll(t);if(t&&t.length){for(var e=[],n=t.length;n--;e.unshift(t[n]));return e}return t?[t]:[]},o.querySelectorAll=function(t,e){if(document.querySelectorAll)e=document.querySelectorAll(t);else{var n=document,o=n.styleSheets[0]||n.createStyleSheet();o.addRule(t,"f:b");for(var i=n.all,s=0,r=[],a=i.length;s<a;s++)i[s].currentStyle.f&&r.push(i[s]);o.removeRule(0),e=r}return e},o.contains=function(t,e,n){if(t==e)return!0;if(!e||!e.nodeType||1!=e.nodeType)return!1;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var o=e.parentNode;o&&o!=n;){if(o==t)return!0;o=o.parentNode}return!1},o.equal=function(t,e){return t.nodeName.toLowerCase()===e},o.bindEvent=function(t,e,n){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,n):t.addEventListener(e,n,{capture:!1,passive:!0})},o.unbindEvent=function(t,e,n){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,n):t.removeEventListener(e,n,{capture:!1,passive:!0})}}),t("./index.js",function(t,e,n){function o(t){this.init(t)}var f=t("./utils.js"),i=t("./defaults.js"),h=t("./dom.js"),s=t("./loadElement.js");n.exports=o;var r=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),a=function(t,e){t.bottom=(window.innerHeight||document.documentElement.clientHeight)+e,t.right=(window.innerWidth||document.documentElement.clientWidth)+e};f.assign(o.prototype,s,{init:function(t){for(var e in t=t||{},this.options={},i)this.options[e]=t[e]||i[e];this.initContext(),this.render()},initContext:function(){var t=this.options,e=this.context={attrSrc:"src",attrSrcset:"srcset",source:t.src,elements:[],container:h.toElements(t.container)[0]||!1,destroyed:!0,isRetina:r,viewport:{top:0-t.offset,left:0-t.offset},validateT:f.throttle(function(){this.validate()},t.validateDelay,this),saveViewportOffsetT:f.throttle(function(){a(e.viewport,t.offset)},t.validateDelay,this)};a(e.viewport,t.offset),f.each(t.breakpoints,function(t){if(t.width>=window.screen.width)return e.source=t.src,!1})},render:function(){var t=this.options,e=this.context;e.elements=h.toElements(t.elements),e.destroyed&&(e.destroyed=!1,e.container&&h.bindEvent(e.container,"scroll",e.validateT),h.bindEvent(window,"resize",e.saveViewportOffsetT),h.bindEvent(window,"resize",e.validateT),h.bindEvent(window,"scroll",e.validateT)),this.validate()},destroy:function(){this.options;var t=this.context;t.container&&h.unbindEvent(t.container,"scroll",t.validateT),h.unbindEvent(window,"scroll",t.validateT),h.unbindEvent(window,"resize",t.validateT),h.unbindEvent(window,"resize",t.saveViewportOffsetT),t.elements=[],t.destroyed=!0},validate:function(){var e=this.options,n=this.context,t=n.elements,o=t.length;f.each(t,function(t){if(!(h.hasClass(t,n.loadingClass)||h.hasClass(t,e.successClass)||h.hasClass(t,e.errorClass)))return this.elementInView(t)?(this.loadElement(t),void o--):void 0;o--},this),o<=0&&this.destroy()},elementInView:function(t){var e=this.options,n=this.context,o=n.viewport,i=n.container,s=t.getBoundingClientRect();if(h.container&&h.contains(i,t)){var r=i.getBoundingClientRect();if(inView(r,o)){var a=r.top-e.offset,l=r.right+e.offset,c=r.bottom+e.offset,d=r.left-e.offset,u={top:a>o.top?a:o.top,right:l<o.right?l:o.right,bottom:c<o.bottom?c:o.bottom,left:d>o.left?d:o.left};return f.inView(s,u)}return!1}return f.inView(s,o)},load:function(t,e){this.context.elements=h.toElements(t),f.each(t,function(t){this.loadElement(element,e)},this)}})}),t("./loadElement.js",function(t,e,n){function s(t,e,n,o){var i=this,s=m.equal(t,"img"),r=e.split(n.separator),a=r[o.isRetina&&1<r.length?1:0],l=m.getAttr(t,n.srcset),c=t.parentNode,d=c&&m.equal(c,"picture");if(!s&&!v.isUndefined(t.src))return t.src=a,void this.loadElementSuccess(t);var u=new Image,f=function(){i.loadElementError(t,"invalid"),m.unbindEvent(u,"error",f),m.unbindEvent(u,"load",h)},h=function(){s?d||i.handleSrcsetElement(t,a,l):t.style.backgroundImage='url("'+a+'")',i.loadElementSuccess(t),m.unbindEvent(u,"error",f),m.unbindEvent(u,"load",h)};d&&(u=t,v.each(c.getElementsByTagName("source"),function(t){this.handleSourceElement(t,o.attrSrcset,n.srcset)},this)),m.addClass(t,n.loadingClass),m.bindEvent(u,"error",f),m.bindEvent(u,"load",h),this.handleSrcsetElement(u,a,l)}var v=t("./utils.js"),m=t("./dom.js");n.exports={handleSourceElement:function(t,e,n){var o=m.getAttr(t,n);o&&m.setAttr(t,e,o)},handleSrcsetElement:function(t,e,n){n&&m.setAttr(t,this.context.attrSrcset,n),t.src=e},loadElementSuccess:function(t){var e=this.options;m.addClass(t,e.successClass),m.removeClass(t,e.loadingClass),e.success&&e.success(t)},loadElementError:function(t,e){var n=this.options;n.error&&n.error(t,e),m.addClass(t,n.errorClass),m.removeClass(t,n.loadingClass)},loadElement:function(t,e){var n=this.options,o=this.context;if(e||n.loadInvisible||0<t.offsetWidth&&0<t.offsetHeight){var i=m.getAttr(t,o.source)||m.getAttr(t,n.src);i?s.call(this,t,i,n,o):(m.addClass(t,n.loadingClass),m.equal(t,"video")?(v.each(t.getElementsByTagName("source"),function(t){this.handleSourceElement(t,o.attrSrc,n.src)},this),t.load(),this.loadElementSuccess(t)):this.loadElementError(t,"missing"))}}}}),t("./utils.js",function(t,n,e){var i=n.hasOwnProperty=Object.prototype.hasOwnProperty,o=n.toString=Object.prototype.toString,s=n.each=function(t,e,n){if(t&&e)for(var o=t.length,i=0;i<o&&!1!==e.call(n,t[i],i);i++);};n.trim=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},n.assign=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var o in n)i.call(n,o)&&(t[o]=n[o])}return t},n.isUndefined=function(t){return void 0===t},s(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){n["is"+e]=function(t){return o.call(t)==="[object "+e+"]"}}),n.throttle=function(e,n,o){var i=0;return function(){var t=+new Date;t-i<n||(i=t,e.apply(o,arguments))}},n.inView=function(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}}),"function"==typeof define&&define.amd?define(n("./index.js")):"object"==typeof exports?module.exports=n("./index.js"):window.HqyLazyload=n("./index.js")}();